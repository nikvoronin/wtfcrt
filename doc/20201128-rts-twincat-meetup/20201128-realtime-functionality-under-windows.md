# Real-time functionality under Windows

The integration of a real-time extension into a complex operating system such as Windows NT (Windows 2000, Windows XP, Windows Vista and Windows 7 are very closely related in this regard) is considerably more difficult than was the case with MS-DOS. Windows is inherently capable of multitasking, so that many processes can be executed in parallel. Therefore, hardware access can take place only in the protected kernel mode. Drivers and the operating system expect a defined temporal behavior of the PC hardware. In order to enable the most transparent possible integration of real-time functionality in Windows without at the same time changing the operating system or other standard software components, a timer implementation was developed for TwinCAT and patented by Beckhoff: the “double-tick.” 

“Double-tick” is the name given to the system characteristic of triggering an interrupt each time when switching from non-real-time mode to real-time mode and back again. When switching to real-time mode, the interrupt is used at the same time to activate the TwinCAT scheduler. The active, deterministic switching back to non-real-time mode after an adjustable length of time guarantees not only that Windows is given sufficient computing time by the respective CPU, but also that the necessary response times for certain hardware functions, such as modem, network or USB, are adhered to. The TwinCAT real-time mode is interrupted in normal mode only by the double-tick interrupt, which activates the scheduler of the real-time kernel and switches back to Windows if necessary. Exceptions to this, however, are the NMI (Non Maskable Interrupt), which is triggered by intolerable hardware errors, and the SMI (System Management Interrupt). In exceptional cases, however, these events can also be prevented by the configuration of TwinCAT. All regular interrupts necessary for the operation of the PC system are allowed in non-real-time mode and are also processed there. Under the conditions described, TwinCAT can ensure the necessary real-time functionality without disturbing the operation of the PC system.

In contrast to the S2000 software, TwinCAT has a modular structure and offers greater automation functionality. In order to support this modularity and finer granularity in the timing and prioritization, a real-time core was developed for TwinCAT that allows 64 task priorities to be assigned, which are then executed in the real-time mode. Beyond that the real-time core offers functions for the synchronization of tasks and CPUs and for intertask communication. The pre-emptive scheduler ensures that the task with the highest priority is started at the desired time and runs to its end. The tasks with a lower priority share the remaining computing time according to their rank.

[TE1010 | TC3 Realtime Monitor](https://download.beckhoff.com/download/document/automation/twincat3/TE1010_TC3_Realtime_Monitor_EN.pdf)

The TwinCAT 3 Realtime Monitor enables precise diagnostics and optimisation of the runtime behaviour of tasks in the TwinCAT 3 runtime. It offers a graphic representation of the temporal processing of real-time tasks and their modules across all processor cores. In addition to that, user-defined processes and their dependencies can also be visualised through appropriate implementation of the control software.

The real-time monitor makes the temporal behaviour of the control software on a target system fully transparent and enables a comprehensive time analysis. It thus supports both error diagnostics and a temporal optimisation of the configuration, in particular for multi-core systems.